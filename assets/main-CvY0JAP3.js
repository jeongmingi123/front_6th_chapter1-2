var Oe=Object.defineProperty;var ue=e=>{throw TypeError(e)};var _e=(e,t,r)=>t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var U=(e,t,r)=>_e(e,typeof t!="symbol"?t+"":t,r),F=(e,t,r)=>t.has(e)||ue("Cannot "+r);var x=(e,t,r)=>(F(e,t,"read from private field"),r?r.call(e):t.get(e)),R=(e,t,r)=>t.has(e)?ue("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),O=(e,t,r,s)=>(F(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),q=(e,t,r)=>(F(e,t,"access private method"),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const Le="modulepreload",Re=function(e){return"/front_6th_chapter1-2/"+e},de={},Pe=function(t,r,s){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),l=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));n=Promise.allSettled(r.map(u=>{if(u=Re(u),u in de)return;de[u]=!0;const i=u.endsWith(".css"),m=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const y=document.createElement("link");if(y.rel=i?"stylesheet":Le,i||(y.as="script"),y.crossOrigin="",y.href=u,l&&y.setAttribute("nonce",l),document.head.appendChild(y),i)return new Promise((A,V)=>{y.addEventListener("load",A),y.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(c){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=c,window.dispatchEvent(l),!l.defaultPrevented)throw c}return n.then(c=>{for(const l of c||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},B={ROOT_EVENT_LISTENERS_KEY:"_eventListeners",UNKNOWN_ELEMENT_TAG:"unknown"};class Ie{constructor(){this.eventStore=new Map,this.currentRoot=null,this.activeListeners=new Map}addEvent(t,r,s){if(!this.isValidElement(t)){console.warn("유효하지 않은 요소에 이벤트를 추가하려고 시도했습니다:",t);return}if(typeof s!="function"){console.warn("핸들러는 함수여야 합니다:",s);return}try{this.ensureElementEventMap(t);const n=this.eventStore.get(t);this.ensureEventTypeSet(n,r),n.get(r).add(s),this.updateEventDelegation()}catch(n){console.error("이벤트 추가 중 오류 발생:",n)}}removeEvent(t,r,s){if(this.isValidElement(t))try{if(this.eventStore.has(t)){const n=this.eventStore.get(t);if(n.has(r)){const o=n.get(r);o.delete(s),o.size===0&&n.delete(r)}n.size===0&&this.eventStore.delete(t)}this.updateEventDelegation()}catch(n){console.error("이벤트 제거 중 오류 발생:",n)}}removeAllEvents(t){if(this.isValidElement(t))try{this.eventStore.delete(t),this.updateEventDelegation()}catch(r){console.error("모든 이벤트 제거 중 오류 발생:",r)}}setupEventListeners(t){if(!this.isValidElement(t)){console.warn("유효하지 않은 root 요소입니다:",t);return}try{this.currentRoot=t,this.cleanupExistingListeners(t),this.registerNewListeners(t)}catch(r){console.error("이벤트 리스너 설정 중 오류 발생:",r)}}cleanup(){this.currentRoot&&this.cleanupExistingListeners(this.currentRoot),this.eventStore.clear(),this.activeListeners.clear(),this.currentRoot=null}getEventInfo(){const t={};return this.eventStore.forEach((r,s)=>{const n={};r.forEach((c,l)=>{n[l]=c.size});const o=s.tagName||B.UNKNOWN_ELEMENT_TAG;t[o]=n}),t}isValidElement(t){return t&&t instanceof Element}ensureElementEventMap(t){this.eventStore.has(t)||this.eventStore.set(t,new Map)}ensureEventTypeSet(t,r){t.has(r)||t.set(r,new Set)}cleanupExistingListeners(t){(t[B.ROOT_EVENT_LISTENERS_KEY]||new Map).forEach((s,n)=>{t.removeEventListener(n,s)})}registerNewListeners(t){const r=new Map;this.collectAllEventTypes().forEach(n=>{const o=this.createDelegatedHandler(n);t.addEventListener(n,o),r.set(n,o)}),t[B.ROOT_EVENT_LISTENERS_KEY]=r}collectAllEventTypes(){const t=new Set;return this.eventStore.forEach(r=>{r.forEach((s,n)=>{t.add(n)})}),t}createDelegatedHandler(t){return r=>{let s=r.target;for(;s&&s!==this.currentRoot;){if(this.eventStore.has(s)){const n=this.eventStore.get(s);n.has(t)&&n.get(t).forEach(c=>{try{c(r)}catch(l){console.error("이벤트 핸들러 실행 중 오류:",l)}})}s=s.parentElement}}}updateEventDelegation(){this.currentRoot&&this.setupEventListeners(this.currentRoot)}}const J=new Ie,he=(e,t,r)=>J.addEvent(e,t,r),X=(e,t,r)=>J.removeEvent(e,t,r),De=e=>J.setupEventListeners(e),Me=["checked","disabled","selected","readOnly"],ke=["disabled","readOnly"],Ue=["checked","selected"];function L(e){return qe(e)?ye():je(e)?$e(e):Array.isArray(e)?He(e):We(e)}function qe(e){return e==null||typeof e=="boolean"}function je(e){return typeof e=="string"||typeof e=="number"}function ye(){return document.createTextNode("")}function $e(e){return document.createTextNode(String(e))}function He(e){const t=document.createDocumentFragment();return e.forEach(r=>{const s=L(r);t.appendChild(s)}),t}function We(e){const{type:t,props:r={},children:s=[]}=e;if(typeof t=="string")return Qe(t,r,s);if(typeof t=="function")throw new Error("함수형 컴포넌트는 createElement로 직접 처리할 수 없습니다. 먼저 normalizeVNode로 정규화하세요.");return ye()}function Qe(e,t,r){const s=document.createElement(e);return Fe(s,t),Ve(s,r),s}function Ve(e,t){t.forEach(r=>{const s=L(r);e.appendChild(s)})}function Fe(e,t){!t||Object.keys(t).length===0||Object.entries(t).forEach(([r,s])=>{if(r!=="children"){if(Be(r,s)){Ge(e,r,s);return}if(r==="className"){e.className=s;return}if(ze(r,s)){Ye(e,s);return}if(Ke(r)){Je(e,r,s);return}Xe(e,r,s)}})}function Be(e,t){return e.startsWith("on")&&typeof t=="function"}function Ge(e,t,r){const s=t.toLowerCase().substring(2);he(e,s,r)}function ze(e,t){return e==="style"&&typeof t=="object"}function Ye(e,t){Object.assign(e.style,t)}function Ke(e){return Me.includes(e)}function Je(e,t,r){e[t]=!!r,ke.includes(t)?r?e.setAttribute(t,""):e.removeAttribute(t):Ue.includes(t)&&e.removeAttribute(t)}function Xe(e,t,r){r!=null&&e.setAttribute(t,r)}const be=()=>{const e=new Set;return{subscribe:s=>e.add(s),notify:()=>e.forEach(s=>s())}},Ze=(e,t=window.localStorage)=>({get:()=>{try{const o=t.getItem(e);return o?JSON.parse(o):null}catch(o){return console.error(`Error parsing storage item for key "${e}":`,o),null}},set:o=>{try{t.setItem(e,JSON.stringify(o))}catch(c){console.error(`Error setting storage item for key "${e}":`,c)}},reset:()=>{try{t.removeItem(e)}catch(o){console.error(`Error removing storage item for key "${e}":`,o)}}}),Z=(e,t)=>{const{subscribe:r,notify:s}=be();let n=t;return{getState:()=>n,dispatch:l=>{const u=e(n,l);u!==n&&(n=u,s())},subscribe:r}};function a(e,t,...r){const s=r.flat(1/0).filter(n=>n!=null&&n!==!1&&n!==!0);return{type:e,props:t,children:s}}function $(e){if(e==null||typeof e=="boolean")return"";if(typeof e=="string"||typeof e=="number")return String(e);if(typeof(e==null?void 0:e.type)=="function"){const t={...e.props,children:e.children},r=e.type(t),s=$(r);return s&&typeof s=="object"&&s.props===null?{...s,props:{}}:s}if(e&&typeof e=="object"){if(e.children){const t=e.children.map(r=>$(r)).filter(r=>r!==""&&r!==null&&r!==void 0);return{...e,children:t}}if(Array.isArray(e))return e.map(t=>$(t)).filter(t=>t!==""&&t!==null&&t!==void 0)}return e}const xe=["checked","disabled","selected","readOnly"],ee="on",Ee="children",ve="className",et="style";function te(e,t){!e||!t||Object.entries(t).forEach(([r,s])=>{if(r.startsWith(ee)&&typeof s=="function"){const n=r.toLowerCase().substring(2);X(e,n,s)}})}function tt(e,t,r,s){const n=t.toLowerCase().substring(2);s!==r&&(s&&typeof s=="function"&&X(e,n,s),he(e,n,r))}function rt(e,t,r){e[t]=!!r,(t==="disabled"||t==="readOnly")&&r?e.setAttribute(t,""):e.removeAttribute(t)}function st(e,t,r){t&&Object.keys(t).forEach(s=>{if(s!==Ee&&(!r||!(s in r)))if(s.startsWith(ee)){const n=s.toLowerCase().substring(2);t[s]&&X(e,n,t[s])}else s===ve?(e.className="",e.removeAttribute("class")):(xe.includes(s)&&(e[s]=!1),e.removeAttribute(s))})}function at(e,t,r){e&&(t&&Object.entries(t).forEach(([s,n])=>{if(s!==Ee)if(s.startsWith(ee)&&typeof n=="function"){const o=r&&r[s];tt(e,s,n,o)}else s===ve?e.className=n:s===et&&typeof n=="object"?Object.assign(e.style,n):xe.includes(s)?rt(e,s,n):n!=null&&e.setAttribute(s,n)}),st(e,r,t))}function nt(e,t,r){const s=e.childNodes[r];s&&(te(s,t.props),e.removeChild(s))}function ot(e,t){const r=L(t);e.appendChild(r)}function ct(e,t,r,s){if(t!==r){const n=e.childNodes[s];n&&n.nodeType===Node.TEXT_NODE&&(n.textContent=t)}}function it(e,t,r){const s=L(t),n=e.childNodes[r];n?e.replaceChild(s,n):e.appendChild(s)}function lt(e,t,r,s){const n=e.childNodes[s];n&&r.props&&te(n,r.props);const o=document.createTextNode(t);n?e.replaceChild(o,n):e.appendChild(o)}function ut(e,t,r,s){const n=e.childNodes[s];n&&r.props&&te(n,r.props);const o=L(t);n?e.replaceChild(o,n):e.appendChild(o)}function dt(e,t,r){const s=t||[],n=r||[],o=Math.min(n.length,s.length);for(let c=0;c<o;c++)z(e,s[c],n[c],c);if(n.length>s.length)for(let c=n.length-1;c>=s.length;c--)e.childNodes[c]&&e.removeChild(e.childNodes[c]);else if(s.length>n.length)for(let c=n.length;c<s.length;c++)z(e,s[c],null,c)}function mt(e,t,r,s){const n=e.childNodes[s];n&&(at(n,t.props,r.props),dt(n,t.children,r.children))}function z(e,t,r,s=0){if(!(!t&&!r)){if(!t&&r){nt(e,r,s);return}if(t&&!r){ot(e,t);return}if(typeof t=="string"&&typeof r=="string"){ct(e,t,r,s);return}if(typeof t=="object"&&typeof r=="string"){it(e,t,s);return}if(typeof t=="string"&&typeof r=="object"){lt(e,t,r,s);return}if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.type!==r.type){ut(e,t,r,s);return}mt(e,t,r,s)}}}function gt(e,t){t.innerHTML="";const r=L(e);t.appendChild(r)}function pt(e,t,r){if(r.firstChild)z(r,e,t,0);else{const s=L(e);r.appendChild(s)}}function ft(e,t){const r=$(e),s=t._vNode;s?pt(r,s,t):gt(r,t),t._vNode=r,De(t)}var I,S,_,T,D,H;const w=class w{constructor(t=""){R(this,D);R(this,I);R(this,S);R(this,_,be());R(this,T);O(this,I,new Map),O(this,S,null),O(this,T,t.replace(/\/$/,"")),window.addEventListener("popstate",()=>{O(this,S,q(this,D,H).call(this)),x(this,_).notify()}),document.addEventListener("click",r=>{if(r.target.closest("[data-link]")){r.preventDefault();const s=r.target.getAttribute("href")||r.target.closest("[data-link]").getAttribute("href");s&&this.push(s)}})}get baseUrl(){return x(this,T)}get query(){return w.parseQuery(window.location.search)}set query(t){const r=w.getUrl(t,x(this,T));this.push(r)}get params(){var t;return((t=x(this,S))==null?void 0:t.params)??{}}get route(){return x(this,S)}get target(){var t;return(t=x(this,S))==null?void 0:t.handler}subscribe(t){x(this,_).subscribe(t)}addRoute(t,r){const s=[],n=t.replace(/:\w+/g,c=>(s.push(c.slice(1)),"([^/]+)")).replace(/\//g,"\\/"),o=new RegExp(`^${x(this,T)}${n}$`);x(this,I).set(t,{regex:o,paramNames:s,handler:r})}push(t){try{let r=t.startsWith(x(this,T))?t:x(this,T)+(t.startsWith("/")?t:"/"+t);`${window.location.pathname}${window.location.search}`!==r&&window.history.pushState(null,"",r),O(this,S,q(this,D,H).call(this,r)),x(this,_).notify()}catch(r){console.error("라우터 네비게이션 오류:",r)}}start(){O(this,S,q(this,D,H).call(this)),x(this,_).notify()}};I=new WeakMap,S=new WeakMap,_=new WeakMap,T=new WeakMap,D=new WeakSet,H=function(t=window.location.pathname){const{pathname:r}=new URL(t,window.location.origin);for(const[s,n]of x(this,I)){const o=r.match(n.regex);if(o){const c={};return n.paramNames.forEach((l,u)=>{c[l]=o[u+1]}),{...n,params:c,path:s}}}return null},U(w,"parseQuery",(t=window.location.search)=>{const r=new URLSearchParams(t),s={};for(const[n,o]of r)s[n]=o;return s}),U(w,"stringifyQuery",t=>{const r=new URLSearchParams;for(const[s,n]of Object.entries(t))n!=null&&n!==""&&r.set(s,String(n));return r.toString()}),U(w,"getUrl",(t,r="")=>{const n={...w.parseQuery(),...t};Object.keys(n).forEach(c=>{(n[c]===null||n[c]===void 0||n[c]==="")&&delete n[c]});const o=w.stringifyQuery(n);return`${r}${window.location.pathname.replace(r,"")}${o?`?${o}`:""}`});let Y=w;const p={SET_PRODUCTS:"products/setProducts",ADD_PRODUCTS:"products/addProducts",SET_LOADING:"products/setLoading",SET_ERROR:"products/setError",SET_CATEGORIES:"products/setCategories",SET_CURRENT_PRODUCT:"products/setCurrentProduct",SET_RELATED_PRODUCTS:"products/setRelatedProducts",RESET_FILTERS:"products/resetFilters",SETUP:"products/setup",SET_STATUS:"products/setStatus"},h={ADD_ITEM:"cart/addItem",REMOVE_ITEM:"cart/removeItem",UPDATE_QUANTITY:"cart/updateQuantity",CLEAR_CART:"cart/clearCart",TOGGLE_SELECT:"cart/toggleSelect",SELECT_ALL:"cart/selectAll",DESELECT_ALL:"cart/deselectAll",REMOVE_SELECTED:"cart/removeSelected",LOAD_FROM_STORAGE:"cart/loadFromStorage",SYNC_TO_STORAGE:"cart/syncToStorage"},E={OPEN_CART_MODAL:"ui/openCartModal",CLOSE_CART_MODAL:"ui/closeCartModal",SHOW_TOAST:"ui/showToast",HIDE_TOAST:"ui/hideToast"},re={products:[],totalCount:0,currentProduct:null,relatedProducts:[],loading:!0,error:null,status:"idle",categories:{}},ht=(e,t)=>{switch(t.type){case p.SET_STATUS:return{...e,status:t.payload};case p.SET_CATEGORIES:return{...e,categories:t.payload,loading:!1,error:null,status:"done"};case p.SET_PRODUCTS:return{...e,products:t.payload.products,totalCount:t.payload.totalCount,loading:!1,error:null,status:"done"};case p.ADD_PRODUCTS:return{...e,products:[...e.products,...t.payload.products],totalCount:t.payload.totalCount,loading:!1,error:null,status:"done"};case p.SET_LOADING:return{...e,loading:t.payload};case p.SET_ERROR:return{...e,error:t.payload,loading:!1,status:"done"};case p.SET_CURRENT_PRODUCT:return{...e,currentProduct:t.payload,loading:!1,error:null,status:"done"};case p.SET_RELATED_PRODUCTS:return{...e,relatedProducts:t.payload,status:"done"};case p.SETUP:return{...e,...t.payload};default:return e}},f=Z(ht,re),se=Ze("shopping_cart"),Ne={items:[],selectedAll:!1},yt=(e,t)=>e.find(r=>r.id===t),bt=(e,t)=>{const r=se.get()??Ne;switch(t.type){case h.ADD_ITEM:{const{product:s,quantity:n=1}=t.payload;if(yt(r.items,s.productId))return{...r,items:r.items.map(c=>c.id===s.productId?{...c,quantity:c.quantity+n}:c)};{const c={id:s.productId,title:s.title,image:s.image,price:parseInt(s.lprice),quantity:n,selected:!1};return{...r,items:[...r.items,c]}}}case h.REMOVE_ITEM:return{...r,items:r.items.filter(s=>s.id!==t.payload)};case h.UPDATE_QUANTITY:{const{productId:s,quantity:n}=t.payload;return{...r,items:r.items.map(o=>o.id===s?{...o,quantity:Math.max(1,n)}:o)}}case h.CLEAR_CART:return{...r,items:[],selectedAll:!1};case h.TOGGLE_SELECT:{const s=t.payload,n=r.items.map(c=>c.id===s?{...c,selected:!c.selected}:c),o=n.length>0&&n.every(c=>c.selected);return{...r,items:n,selectedAll:o}}case h.SELECT_ALL:{const s=r.items.map(n=>({...n,selected:!0}));return{...r,items:s,selectedAll:!0}}case h.DESELECT_ALL:{const s=r.items.map(n=>({...n,selected:!1}));return{...r,items:s,selectedAll:!1}}case h.REMOVE_SELECTED:return{...r,items:r.items.filter(s=>!s.selected),selectedAll:!1};case h.LOAD_FROM_STORAGE:return{...r,...t.payload};default:return r}},N=Z(bt,Ne),xt={cartModal:{isOpen:!1},globalLoading:!1,toast:{isVisible:!1,message:"",type:"info"}},Et=(e,t)=>{switch(t.type){case E.OPEN_CART_MODAL:return{...e,cartModal:{isOpen:!0}};case E.CLOSE_CART_MODAL:return{...e,cartModal:{isOpen:!1}};case E.HIDE_TOAST:return{...e,toast:{...e.toast,isVisible:!1}};case E.SHOW_TOAST:return{...e,toast:{isVisible:!0,message:t.payload.message,type:t.payload.type||"info"}};default:return e}},v=Z(Et,xt),ae="/front_6th_chapter1-2/",d=new Y(ae),G=new WeakMap,P={current:null,previous:null},vt={mount:null,unmount:null,watches:[],deps:[],mounted:!1},ne=e=>(G.has(e)||G.set(e,{...vt}),G.get(e)),Nt=(e,t)=>!Array.isArray(e)||!Array.isArray(t)?!1:e.length!==t.length?!0:e.some((r,s)=>r!==t[s]),St=e=>{var r;const t=ne(e);t.mounted||(console.log("🚀 페이지 마운트:",e.name),(r=t.mount)==null||r.call(t),t.mounted=!0,t.deps=[])},wt=e=>{var r;const t=ne(e);t.mounted&&(console.log("🔻 페이지 언마운트:",e.name),(r=t.unmount)==null||r.call(t),t.mounted=!1)},Se=({onMount:e,onUnmount:t,watches:r}={},s)=>{const n=ne(s);return typeof e=="function"&&(n.mount=e),typeof t=="function"&&(n.unmount=t),Array.isArray(r)&&(n.watches=typeof r[0]=="function"?[r]:r),(...o)=>{const c=P.current!==s;return P.current&&c&&wt(P.current),P.previous=P.current,P.current=s,c?St(s):n.watches&&n.watches.forEach(([l,u],i)=>{const m=l();Nt(m,n.deps[i])&&(console.log(`📊 의존성 변경 감지 (${s.name}):`,n.deps[i],"→",m),u()),n.deps[i]=Array.isArray(m)?[...m]:[]}),s(...o)}};async function oe(e={}){const{limit:t=20,search:r="",category1:s="",category2:n="",sort:o="price_asc"}=e,c=e.current??e.page??1,l=new URLSearchParams({page:c.toString(),limit:t.toString(),...r&&{search:r},...s&&{category1:s},...n&&{category2:n},sort:o});return await(await fetch(`/api/products?${l}`)).json()}async function Tt(e){return await(await fetch(`/api/products/${e}`)).json()}async function Ct(){return await(await fetch("/api/categories")).json()}const At=async()=>{d.query={current:void 0},f.dispatch({type:p.SETUP,payload:{...re,loading:!0,status:"pending"}});try{const[{products:e,pagination:{total:t}},r]=await Promise.all([oe(d.query),Ct()]);f.dispatch({type:p.SETUP,payload:{products:e,categories:r,totalCount:t,loading:!1,status:"done"}})}catch(e){throw f.dispatch({type:p.SET_ERROR,payload:e.message}),e}},ce=async(e=!0)=>{try{f.dispatch({type:p.SETUP,payload:{loading:!0,status:"pending",error:null}});const{products:t,pagination:{total:r}}=await oe(d.query),s={products:t,totalCount:r};if(e){f.dispatch({type:p.SET_PRODUCTS,payload:s});return}f.dispatch({type:p.ADD_PRODUCTS,payload:s})}catch(t){throw f.dispatch({type:p.SET_ERROR,payload:t.message}),t}},Ot=async()=>{const e=f.getState();!(e.products.length<e.totalCount)||e.loading||(d.query={current:Number(d.query.current??1)+1},await ce(!1))},_t=e=>{d.query={search:e,current:1}},W=e=>{d.query={...e,current:1}},Lt=e=>{d.query={sort:e,current:1}},Rt=e=>{d.query={limit:e,current:1}},me=async e=>{try{const t=f.getState().currentProduct;if(e===(t==null?void 0:t.productId)){t.category2&&await ge(t.category2,e);return}f.dispatch({type:p.SETUP,payload:{...re,currentProduct:null,loading:!0,status:"pending"}});const r=await Tt(e);f.dispatch({type:p.SET_CURRENT_PRODUCT,payload:r}),r.category2&&await ge(r.category2,e)}catch(t){throw console.error("상품 상세 페이지 로드 실패:",t),f.dispatch({type:p.SET_ERROR,payload:t.message}),t}},ge=async(e,t)=>{try{const n=(await oe({category2:e,limit:20,page:1})).products.filter(o=>o.productId!==t);f.dispatch({type:p.SET_RELATED_PRODUCTS,payload:n})}catch(r){console.error("관련 상품 로드 실패:",r),f.dispatch({type:p.SET_RELATED_PRODUCTS,payload:[]})}},Pt=()=>{try{const e=se.get();e&&N.dispatch({type:h.LOAD_FROM_STORAGE,payload:e})}catch(e){console.error("장바구니 로드 실패:",e)}},C=()=>{try{const e=N.getState();se.set(e)}catch(e){console.error("장바구니 저장 실패:",e)}},we=(e,t=1)=>{N.dispatch({type:h.ADD_ITEM,payload:{product:e,quantity:t}}),C(),v.dispatch({type:E.SHOW_TOAST,payload:{message:"장바구니에 추가되었습니다",type:"success"}}),setTimeout(()=>{v.dispatch({type:E.HIDE_TOAST})},3e3)},It=e=>{N.dispatch({type:h.REMOVE_ITEM,payload:e}),C()},ie=(e,t)=>{N.dispatch({type:h.UPDATE_QUANTITY,payload:{productId:e,quantity:t}}),C()},Dt=e=>{N.dispatch({type:h.TOGGLE_SELECT,payload:e}),C()},Mt=()=>{N.dispatch({type:h.SELECT_ALL}),C()},kt=()=>{N.dispatch({type:h.DESELECT_ALL}),C()},Ut=()=>{N.dispatch({type:h.REMOVE_SELECTED}),C(),v.dispatch({type:E.SHOW_TOAST,payload:{message:"선택된 상품들이 삭제되었습니다",type:"info"}}),setTimeout(()=>{v.dispatch({type:E.HIDE_TOAST})},3e3)},qt=()=>{N.dispatch({type:h.CLEAR_CART}),C(),v.dispatch({type:E.SHOW_TOAST,payload:{message:"장바구니가 비워졌습니다",type:"info"}}),setTimeout(()=>{v.dispatch({type:E.HIDE_TOAST})},3e3)},g=({src:e,...t})=>{const r=String(ae+e).replace("//","/");return a("img",{src:r,...t})},jt=[10,20,50,100],$t=[{value:"price_asc",label:"가격 낮은순"},{value:"price_desc",label:"가격 높은순"},{value:"name_asc",label:"이름순"},{value:"name_desc",label:"이름 역순"}],Ht=async e=>{if(e.key==="Enter"){const t=e.target.value.trim();try{await _t(t)}catch(r){console.error("검색 실패:",r)}}},Wt=async e=>{const t=parseInt(e.target.value);try{await Rt(t)}catch(r){console.error("상품 수 변경 실패:",r)}},Qt=async e=>{const t=e.target.value;try{await Lt(t)}catch(r){console.error("정렬 변경 실패:",r)}},pe=async e=>{const t=e.target.getAttribute("data-breadcrumb");try{if(t==="reset")await W({category1:"",category2:""});else if(t==="category1"){const r=e.target.getAttribute("data-category1");await W({category1:r,category2:""})}}catch(r){console.error("브레드크럼 네비게이션 실패:",r)}},Vt=async e=>{const t=e.target.getAttribute("data-category1");if(t)try{await W({category1:t,category2:""})}catch(r){console.error("1depth 카테고리 선택 실패:",r)}},Ft=async e=>{const t=e.target.getAttribute("data-category1"),r=e.target.getAttribute("data-category2");if(!(!t||!r))try{await W({category1:t,category2:r})}catch(s){console.error("2depth 카테고리 선택 실패:",s)}};function Bt({searchQuery:e="",limit:t=20,sort:r="price_asc",category:s={},categories:n={}}){const o=Object.keys(n).length>0?Object.keys(n):[],c=jt.map(i=>a("option",{key:i,value:i,selected:Number(t)===i},i,"개")),l=$t.map(({value:i,label:m})=>a("option",{key:i,value:i,selected:r===i},m)),u=o.map(i=>a("button",{key:i,"data-category1":i,className:`category1-filter-btn text-left px-3 py-2 text-sm rounded-md border transition-colors
                 bg-white border-gray-300 text-gray-700 hover:bg-gray-50`,onClick:Vt},i));return a("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-4"},a("div",{className:"mb-4"},a("div",{className:"relative"},a("input",{type:"text",id:"search-input",placeholder:"상품명을 검색해보세요...",value:e,className:`w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg
                        focus:ring-2 focus:ring-blue-500 focus:border-blue-500`,onKeyDown:Ht}),a("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},a(g,{src:"/search-icon.svg",alt:"검색",className:"h-5 w-5 text-gray-400"})))),a("div",{className:"space-y-3"},a("div",{className:"space-y-2"},a("div",{className:"flex items-center gap-2"},a("label",{className:"text-sm text-gray-600"},"카테고리:"),["전체",s.category1,s.category2].filter((i,m)=>m===0||!!i).map((i,m)=>{if(i==="전체")return a("button",{key:"reset","data-breadcrumb":"reset",className:"text-xs hover:text-blue-800 hover:underline",onClick:pe},"전체");if(m===1)return a("button",{key:i,"data-breadcrumb":"category1","data-category1":i,className:"text-xs hover:text-blue-800 hover:underline",onClick:pe},i);if(m===2)return a("span",{key:i,className:"text-xs text-gray-600 cursor-default"},i)}).reduce((i,m,y)=>(y>0&&i.push(a("span",{className:"text-xs text-gray-500"},">")),i.push(m),i),[])),!s.category1&&a("div",{className:"flex flex-wrap gap-2"},o.length>0?u:a("div",{className:"text-sm text-gray-500 italic"},"카테고리 로딩 중...")),s.category1&&n[s.category1]&&a("div",{className:"space-y-2"},a("div",{className:"flex flex-wrap gap-2"},Object.keys(n[s.category1]).map(i=>{const m=s.category2===i;return a("button",{key:i,"data-category1":s.category1,"data-category2":i,className:`category2-filter-btn text-left px-3 py-2 text-sm rounded-md border transition-colors
                               ${m?"bg-blue-100 border-blue-300 text-blue-800":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,onClick:Ft},i)})))),a("div",{className:"flex gap-2 items-center justify-between"},a("div",{className:"flex items-center gap-2"},a("label",{className:"text-sm text-gray-600"},"개수:"),a("select",{id:"limit-select",className:"text-sm border border-gray-300 rounded px-2 py-1 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",onChange:Wt},c)),a("div",{className:"flex items-center gap-2"},a("label",{className:"text-sm text-gray-600"},"정렬:"),a("select",{id:"sort-select",className:`text-sm border border-gray-300 rounded px-2 py-1
                           focus:ring-1 focus:ring-blue-500 focus:border-blue-500`,onChange:Qt},l)))))}const Gt=e=>{const t=e.target.closest("[data-product-id]"),r=t.getAttribute("data-product-id"),s=t.previousElementSibling;if(r&&s){const n=parseInt(s.value)+1;s.value=n,ie(r,n)}},zt=e=>{const t=e.target.closest("[data-product-id]"),r=t.getAttribute("data-product-id"),s=t.nextElementSibling;if(r&&s){const n=Math.max(1,parseInt(s.value)-1);s.value=n,ie(r,n)}},Yt=(e,t)=>{const r=Math.max(1,parseInt(t)||1);e&&ie(e,r)};function Kt({id:e,title:t,image:r,price:s,quantity:n,selected:o}){const c=s*n;return a("div",{className:"flex items-center py-3 border-b border-gray-100 cart-item","data-product-id":e},a("label",{className:"flex items-center mr-3"},a("input",{type:"checkbox",checked:o,className:`cart-item-checkbox w-4 h-4 text-blue-600 border-gray-300 rounded
                      focus:ring-blue-500`,"data-product-id":e,onChange:()=>Dt(e)})),a("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden mr-3 flex-shrink-0"},a("img",{src:r,alt:t,className:"w-full h-full object-cover cursor-pointer cart-item-image","data-product-id":e})),a("div",{className:"flex-1 min-w-0"},a("h4",{className:"text-sm font-medium text-gray-900 truncate cursor-pointer cart-item-title","data-product-id":e},t),a("p",{className:"text-sm text-gray-600 mt-1"},s.toLocaleString(),"원"),a("div",{className:"flex items-center mt-2"},a("button",{className:`quantity-decrease-btn w-7 h-7 flex items-center justify-center
                         border border-gray-300 rounded-l-md bg-gray-50 hover:bg-gray-100`,"data-product-id":e,onClick:zt},a(g,{src:"/minus-icon.svg",alt:"감소",className:"w-3 h-3"})),a("input",{type:"number",value:n,min:"1",className:`quantity-input w-12 h-7 text-center text-sm border-t border-b
                        border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500`,disabled:!0,"data-product-id":e,onChange:l=>Yt(e,l.target.value)}),a("button",{className:`quantity-increase-btn w-7 h-7 flex items-center justify-center
                         border border-gray-300 rounded-r-md bg-gray-50 hover:bg-gray-100`,"data-product-id":e,onClick:Gt},a(g,{src:"/plus-icon.svg",alt:"증가",className:"w-3 h-3"})))),a("div",{className:"text-right ml-3"},a("p",{className:"text-sm font-medium text-gray-900"},c.toLocaleString(),"원"),a("button",{className:"cart-item-remove-btn mt-1 text-xs text-red-600 hover:text-red-800","data-product-id":e,onClick:()=>It(e)},"삭제")))}const fe=()=>{v.dispatch({type:E.CLOSE_CART_MODAL})},Jt=e=>{e.target.checked?Mt():kt()},Xt=()=>{v.dispatch({type:E.SHOW_TOAST,payload:{message:"구매 기능은 추후 구현 예정입니다.",type:"info"}})};let K=!1;const Te=e=>{e.key==="Escape"&&(v.getState().cartModal.isOpen&&v.dispatch({type:E.CLOSE_CART_MODAL}),document.removeEventListener("keydown",Te),K=!1)},Zt=()=>{K||(document.addEventListener("keydown",Te),K=!0)};function er({items:e=[],selectedAll:t=!1,isOpen:r=!1}){if(Zt(),!r)return"";const s=e.filter(l=>l.selected),n=s.length,o=e.reduce((l,u)=>l+u.price*u.quantity,0),c=s.reduce((l,u)=>l+u.price*u.quantity,0);return a("div",{className:"fixed inset-0 z-50 overflow-y-auto cart-modal"},a("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity cart-modal-overlay",onClick:fe}),a("div",{className:"flex min-h-full items-end justify-center p-0 sm:items-center sm:p-4"},a("div",{className:"relative bg-white rounded-t-lg sm:rounded-lg shadow-xl w-full max-w-md sm:max-w-lg max-h-[90vh] overflow-hidden"},a("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 flex items-center justify-between"},a("h2",{className:"text-lg font-bold text-gray-900 flex items-center"},a(g,{src:"/cart-icon.svg",alt:"장바구니",className:"w-5 h-5 mr-2"}),"장바구니",e.length>0&&a("span",{className:"text-sm font-normal text-gray-600 ml-1"},"(",e.length,")")),a("button",{id:"cart-modal-close-btn",className:"text-gray-400 hover:text-gray-600 p-1",onClick:fe},a(g,{src:"/close-icon.svg",alt:"닫기",className:"w-6 h-6"}))),e.length===0?a("div",{className:"flex-1 flex items-center justify-center p-8"},a("div",{className:"text-center"},a("div",{className:"text-gray-400 mb-4"},a(g,{src:"/empty-cart-icon.svg",alt:"빈 장바구니",className:"mx-auto h-12 w-12"})),a("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"장바구니가 비어있습니다"),a("p",{className:"text-gray-600"},"원하는 상품을 담아보세요!"))):a("div",{className:"flex flex-col max-h-[calc(90vh-120px)]"},a("div",{className:"p-4 border-b border-gray-200 bg-gray-50"},a("label",{className:"flex items-center text-sm text-gray-700"},a("input",{type:"checkbox",id:"cart-modal-select-all-checkbox",checked:t,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mr-2",onChange:Jt}),"전체선택 (",e.length,"개)")),a("div",{className:"flex-1 overflow-y-auto"},a("div",{className:"p-4 space-y-4"},e.map(l=>a(Kt,{...l}))))),e.length>0&&a("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 p-4"},n>0&&a("div",{className:"flex justify-between items-center mb-3 text-sm"},a("span",{className:"text-gray-600"},"선택한 상품 (",n,"개)"),a("span",{className:"font-medium"},c.toLocaleString(),"원")),a("div",{className:"flex justify-between items-center mb-4"},a("span",{className:"text-lg font-bold text-gray-900"},"총 금액"),a("span",{className:"text-xl font-bold text-blue-600"},o.toLocaleString(),"원")),a("div",{className:"space-y-2"},n>0&&a("button",{id:"cart-modal-remove-selected-btn",className:`w-full bg-red-600 text-white py-2 px-4 rounded-md
                                 hover:bg-red-700 transition-colors text-sm`,onClick:Ut},"선택한 상품 삭제 (",n,"개)"),a("div",{className:"flex gap-2"},a("button",{id:"cart-modal-clear-cart-btn",className:`flex-1 bg-gray-600 text-white py-2 px-4 rounded-md
                                 hover:bg-gray-700 transition-colors text-sm`,onClick:qt},"전체 비우기"),a("button",{id:"cart-modal-checkout-btn",className:`flex-1 bg-blue-600 text-white py-2 px-4 rounded-md
                                 hover:bg-blue-700 transition-colors text-sm`,onClick:Xt},"구매하기")))))))}const tr=({error:e})=>a("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},a("div",{className:"text-center"},a("div",{className:"text-red-500 mb-4"},a(g,{src:"/error-large-icon.svg",alt:"오류",className:"mx-auto h-12 w-12"})),a("h1",{className:"text-xl font-bold text-gray-900 mb-2"},"상품을 찾을 수 없습니다"),a("p",{className:"text-gray-600 mb-4"},e||"요청하신 상품이 존재하지 않습니다."),a("button",{onClick:()=>window.history.back(),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 mr-2"},"이전 페이지"),a("a",{href:"/","data-link":"/",className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700"},"홈으로"))),rr=()=>{v.dispatch({type:E.HIDE_TOAST})};function sr({isVisible:e=!1,message:t="",type:r="info"}){if(!e)return"";const s=()=>{switch(r){case"success":return{bg:"bg-green-600",icon:a(g,{src:"/success-icon.svg",alt:"성공",className:"w-5 h-5"})};case"error":return{bg:"bg-red-600",icon:a(g,{src:"/error-icon.svg",alt:"오류",className:"w-5 h-5"})};case"warning":return{bg:"bg-yellow-600",icon:a(g,{src:"/warning-icon.svg",alt:"경고",className:"w-5 h-5"})};default:return{bg:"bg-blue-600",icon:a(g,{src:"/info-icon.svg",alt:"정보",className:"w-5 h-5"})}}},{bg:n,icon:o}=s();return a("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-50 toast-container"},a("div",{className:`${n} text-white px-4 py-3 rounded-lg shadow-lg flex items-center space-x-2 max-w-sm`},a("div",{className:"flex-shrink-0"},o),a("p",{className:"text-sm font-medium"},t),a("button",{id:"toast-close-btn",className:"flex-shrink-0 ml-2 text-white hover:text-gray-200",onClick:rr},a(g,{src:"/close-icon-white.svg",alt:"닫기",className:"w-4 h-4"}))))}function ar(){return a("h1",{className:"text-xl font-bold text-gray-900"},a("a",{href:"/","data-link":"/"},"쇼핑몰"))}function nr(){return a("footer",{className:"bg-white shadow-sm sticky top-0 z-40"},a("div",{className:"max-w-md mx-auto py-8 text-center text-gray-500"},a("p",null,"© ",new Date().getFullYear()," 항해플러스 프론트엔드 쇼핑몰")))}const or=async e=>{const r=f.getState().products.find(s=>s.productId===e);r&&we(r,1)};function cr({productId:e,title:t,image:r,lprice:s,brand:n,onClick:o}){const c=Number(s),l=u=>{u.preventDefault(),o(e)};return a("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden product-card","data-product-id":e},a("div",{className:"aspect-square bg-gray-100 overflow-hidden cursor-pointer product-image",onClick:l},a("img",{src:r,alt:t,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-200",loading:"lazy"})),a("div",{className:"p-3"},a("div",{className:"cursor-pointer product-info mb-3",onClick:l},a("h3",{className:"text-sm font-medium text-gray-900 line-clamp-2 mb-1"},t),a("p",{className:"text-xs text-gray-500 mb-2"},n),a("p",{className:"text-lg font-bold text-gray-900"},c.toLocaleString(),"원")),a("button",{className:`w-full bg-blue-600 text-white text-sm py-2 px-3 rounded-md
                       hover:bg-blue-700 transition-colors add-to-cart-btn`,"data-product-id":e,onClick:()=>or(e)},"장바구니 담기")))}function ir(){return a("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden animate-pulse"},a("div",{className:"aspect-square bg-gray-200"}),a("div",{className:"p-3"},a("div",{className:"h-4 bg-gray-200 rounded mb-2"}),a("div",{className:"h-3 bg-gray-200 rounded w-2/3 mb-2"}),a("div",{className:"h-5 bg-gray-200 rounded w-1/2 mb-3"}),a("div",{className:"h-8 bg-gray-200 rounded"})))}const lr=async()=>{try{await ce(!0)}catch(e){console.error("재시도 실패:",e)}},ur=async e=>{d.push(`/product/${e}`)};function dr({products:e=[],loading:t=!1,error:r=null,totalCount:s=0,hasMore:n=!0}){return r?a("div",{className:"text-center py-12"},a("div",{className:"text-red-500 mb-4"},a(g,{src:"/error-large-icon.svg",alt:"오류",className:"mx-auto h-12 w-12"})),a("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"오류가 발생했습니다"),a("p",{className:"text-gray-600 mb-4"},r),a("button",{id:"retry-btn",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",onClick:lr},"다시 시도")):!t&&e.length===0?a("div",{className:"text-center py-12"},a("div",{className:"text-gray-400 mb-4"},a(g,{src:"/search-large-icon.svg",alt:"검색",className:"mx-auto h-12 w-12"})),a("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"상품을 찾을 수 없습니다"),a("p",{className:"text-gray-600"},"다른 검색어를 시도해보세요.")):a("div",null,s>0&&a("div",{className:"mb-4 text-sm text-gray-600"},"총 ",a("span",{className:"font-medium text-gray-900"},s.toLocaleString(),"개"),"의 상품"),a("div",{className:"grid grid-cols-2 gap-4 mb-6",id:"products-grid"},e.map(o=>a(cr,{...o,onClick:ur})),t&&Array.from({length:6}).map(()=>a(ir,null))),t&&e.length>0&&a("div",{className:"text-center py-4"},a("div",{className:"inline-flex items-center"},a(g,{src:"/loading-icon.svg",alt:"로딩",className:"animate-spin h-5 w-5 text-blue-600 mr-2"}),a("span",{className:"text-sm text-gray-600"},"상품을 불러오는 중..."))),!n&&e.length>0&&!t&&a("div",{className:"text-center py-4 text-sm text-gray-500"},"모든 상품을 확인했습니다"),a("div",{id:"scroll-trigger",className:"h-4"}))}const mr=async e=>{const t=new URLSearchParams(e).toString();d.push(`/?${t}`)},gr=async()=>{const e=f.getState().currentProduct,t={category1:e==null?void 0:e.category1,category2:e==null?void 0:e.category2,currentPage:1},r=new URLSearchParams(t).toString();d.push(`/?${r}`)},pr=()=>{const e=document.getElementById("quantity-input");if(e){const t=parseInt(e.getAttribute("max"))||100;e.value=Math.min(t,parseInt(e.value)+1)}},fr=()=>{const e=document.getElementById("quantity-input");e&&(e.value=Math.max(1,parseInt(e.value)-1))},hr=()=>{const e=document.getElementById("quantity-input"),t=e?parseInt(e.value):1,s=f.getState().currentProduct;s&&(console.log("🛒 상품 상세 페이지에서 장바구니 추가:",s),we(s,t))};function yr({product:e,relatedProducts:t=[]}){const{productId:r,title:s,image:n,lprice:o,brand:c,description:l="",rating:u=0,reviewCount:i=0,stock:m=100,category1:y,category2:A}=e,V=Number(o),M=[];return y&&M.push({name:y,category:"category1",value:y}),A&&M.push({name:A,category:"category2",value:A}),a("div",null,M.length>0&&a("nav",{className:"mb-4"},a("div",{className:"flex items-center space-x-2 text-sm text-gray-600"},a("a",{href:"/","data-link":"/",className:"hover:text-blue-600 transition-colors"},"홈"),M.map((b,k)=>[a(g,{key:`${b.category}-icon`,src:"/chevron-right-icon.svg",alt:"오른쪽 화살표",className:"w-4 h-4 text-gray-400"}),a("button",{key:`${b.category}-btn`,className:"breadcrumb-link",[`data-${b.category}`]:b.value,onClick:()=>mr(k===0?{category1:b.value}:{category1:M[k-1].value,category2:b.value})},b.name)]).flat())),a("div",{className:"bg-white rounded-lg shadow-sm mb-6"},a("div",{className:"p-4"},a("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden mb-4"},a("img",{src:n,alt:s,className:"w-full h-full object-cover product-detail-image"})),a("div",null,a("p",{className:"text-sm text-gray-600 mb-1"},c),a("h1",{className:"text-xl font-bold text-gray-900 mb-3"},s),u>0&&a("div",{className:"flex items-center mb-3"},a("div",{className:"flex items-center"},Array(5).fill(0).map((b,k)=>a(g,{key:k,src:"/star-icon.svg",alt:"별점",className:`w-4 h-4 ${k<u?"text-yellow-400":"text-gray-300"}`}))),a("span",{className:"ml-2 text-sm text-gray-600"},u,".0 (",i.toLocaleString(),"개 리뷰)")),a("div",{className:"mb-4"},a("span",{className:"text-2xl font-bold text-blue-600"},V.toLocaleString(),"원")),a("div",{className:"text-sm text-gray-600 mb-4"},"재고 ",m.toLocaleString(),"개"),l&&a("div",{className:"text-sm text-gray-700 leading-relaxed mb-6"},l))),a("div",{className:"border-t border-gray-200 p-4"},a("div",{className:"flex items-center justify-between mb-4"},a("span",{className:"text-sm font-medium text-gray-900"},"수량"),a("div",{className:"flex items-center"},a("button",{id:"quantity-decrease",className:`w-8 h-8 flex items-center justify-center border border-gray-300
                             rounded-l-md bg-gray-50 hover:bg-gray-100`,onClick:fr},a(g,{src:"/quantity-minus-icon.svg",alt:"수량 감소",className:"w-4 h-4"})),a("input",{type:"number",id:"quantity-input",value:"1",min:"1",max:m,className:`w-16 h-8 text-center text-sm border-t border-b border-gray-300
                            focus:ring-1 focus:ring-blue-500 focus:border-blue-500`}),a("button",{id:"quantity-increase",className:`w-8 h-8 flex items-center justify-center border border-gray-300
                             rounded-r-md bg-gray-50 hover:bg-gray-100`,onClick:pr},a(g,{src:"/quantity-plus-icon.svg",alt:"수량 증가",className:"w-4 h-4"})))),a("button",{id:"add-to-cart-btn","data-product-id":r,className:`w-full bg-blue-600 text-white py-3 px-4 rounded-md
                         hover:bg-blue-700 transition-colors font-medium`,onClick:hr},"장바구니 담기"))),a("div",{className:"mb-6"},a("button",{className:`block w-full text-center bg-gray-100 text-gray-700 py-3 px-4 rounded-md
                  hover:bg-gray-200 transition-colors go-to-product-list`,onClick:gr},"상품 목록으로 돌아가기")),t.length>0&&a("div",{className:"bg-white rounded-lg shadow-sm"},a("div",{className:"p-4 border-b border-gray-200"},a("h2",{className:"text-lg font-bold text-gray-900"},"관련 상품"),a("p",{className:"text-sm text-gray-600"},"같은 카테고리의 다른 상품들")),a("div",{className:"p-4"},a("div",{className:"grid grid-cols-2 gap-3 responsive-grid"},t.slice(0,20).map(b=>a("div",{key:b.productId,className:"bg-gray-50 rounded-lg p-3 related-product-card cursor-pointer","data-product-id":b.productId,onClick:()=>d.push(`/product/${b.productId}`)},a("div",{className:"aspect-square bg-white rounded-md overflow-hidden mb-2"},a("img",{src:b.image,alt:b.title,className:"w-full h-full object-cover",loading:"lazy"})),a("h3",{className:"text-sm font-medium text-gray-900 mb-1 line-clamp-2"},b.title),a("p",{className:"text-sm font-bold text-blue-600"},Number(b.lprice).toLocaleString(),"원")))))))}const br=(e=200)=>{const t=window.pageYOffset||document.documentElement.scrollTop,r=window.innerHeight,s=document.documentElement.scrollHeight;return t+r>=s-e},xr=e=>{let t=!1;return(...r)=>{t||(t=!0,queueMicrotask(()=>{t=!1,e(...r)}))}},Er=()=>{v.dispatch({type:E.OPEN_CART_MODAL})},le=({headerLeft:e,children:t})=>{const r=N.getState(),{cartModal:s,toast:n}=v.getState(),o=r.items.length,c=a("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center"},o>99?"99+":o);return a("div",{className:"min-h-screen bg-gray-50"},a("header",{className:"bg-white shadow-sm sticky top-0 z-40"},a("div",{className:"max-w-md mx-auto px-4 py-4"},a("div",{className:"flex items-center justify-between"},e,a("div",{className:"flex items-center space-x-2"},a("button",{id:"cart-icon-btn",className:"relative p-2 text-gray-700 hover:text-gray-900 transition-colors",onClick:Er},a(g,{src:"/cart-header-icon.svg",alt:"장바구니",className:"w-6 h-6"}),o>0&&c))))),a("main",{className:"max-w-md mx-auto px-4 py-4"},t),a(er,{...r,isOpen:s.isOpen}),a(sr,{...n}),a(nr,null))},Ce=a("h1",{className:"text-xl font-bold text-gray-900"},a("a",{href:"/","data-link":"/"},"쇼핑몰"));console.log(Ce);let Q=!1;const Ae=async()=>{var e;if(((e=d.route)==null?void 0:e.path)==="/"&&br(200)){const t=f.getState(),r=t.products.length<t.totalCount;if(t.loading||!r)return;try{await Ot()}catch(s){console.error("무한 스크롤 로드 실패:",s)}}},vr=()=>{Q||(window.addEventListener("scroll",Ae),Q=!0)},Nr=()=>{Q&&(window.removeEventListener("scroll",Ae),Q=!1)},Sr=Se({onMount:()=>{vr(),At()},onUnmount:()=>{Nr()},watches:[()=>{const{search:e,limit:t,sort:r,category1:s,category2:n}=d.query;return[e,t,r,s,n]},()=>ce(!0)]},()=>{console.log("🏠 홈 페이지 로드");const e=f.getState(),{search:t,limit:r,sort:s,category1:n,category2:o}=d.query,{products:c,loading:l,error:u,totalCount:i,categories:m}=e,y={category1:n,category2:o},A=c.length<i;return a(le,{headerLeft:Ce},a(Bt,{searchQuery:t,category:y,sort:s,limit:r,categories:m}),a("div",{className:"mb-6"},a(dr,{products:c,loading:l,error:u,totalCount:i,hasMore:A})))}),wr=Se({onMount:()=>{me(d.params.id)},watches:[()=>[d.params.id],()=>me(d.params.id)]},()=>{const{currentProduct:e,relatedProducts:t=[],error:r,loading:s}=f.getState();return a(le,{headerLeft:a("div",{className:"flex items-center space-x-3"},a("button",{onClick:()=>window.history.back(),className:"p-2 text-gray-700 hover:text-gray-900 transition-colors"},a(g,{src:"/back-icon.svg",alt:"뒤로",className:"w-6 h-6"})),a("h1",{className:"text-lg font-bold text-gray-900"},"상품 상세"))},a("div",{className:"min-h-screen bg-gray-50 p-4"},s?a("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},a("div",{className:"text-center"},a("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a("p",{className:"text-gray-600"},"상품 정보를 불러오는 중..."))):r&&!e?a(tr,{error:r}):a(yr,{product:e,relatedProducts:t})))}),Tr=()=>le({headerLeft:ar(),children:a("div",{className:"text-center my-4 py-20 shadow-md p-6 bg-white rounded-lg"},a(g,{src:"/404.svg",alt:"페이지를 찾을 수 없습니다"}),a("a",{href:"/","data-link":"/",className:"inline-block px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors"},"홈으로"))});d.addRoute("/",Sr);d.addRoute("/product/:id",wr);d.addRoute(".*",Tr);const j=xr(()=>{const e=document.getElementById("root");if(!e)return;const t=d.target;ft(a(t,null),e)});function Cr(){f.subscribe(j),N.subscribe(j),v.subscribe(j),d.subscribe(j)}const Ar=()=>Pe(async()=>{const{worker:e}=await import("./browser-ipwmi47v.js");return{worker:e}},[]).then(({worker:e})=>e.start({serviceWorker:{url:`${ae}mockServiceWorker.js`},onUnhandledRequest:"bypass"}));function Or(){console.log("🚀 애플리케이션이 시작되었습니다."),console.log("✅ MSW 워커 시작 완료"),Pt(),console.log("✅ 장바구니 데이터 복원 완료"),Cr(),console.log("✅ 렌더링 시스템 초기화 완료"),d.start(),console.log("✅ 렌더링 설정 완료"),console.log("🎉 애플리케이션 초기화 완료!")}Ar().then(Or);
